{
  "license": "Apache 2.0",
  "conflicting": {
  },
  "dependencies": {
  },
  "recipes": {
  },
  "providing": {
  },
  "maintainer": "Doug MacEachern",
  "description": "Installs and configures Hudson CI server & slaves",
  "replacing": {
  },
  "platforms": {
  },
  "long_description": "= DESCRIPTION:\n\nInstalls and configures Hudson CI server & node slaves.\n\n= REQUIREMENTS:\n\n== Platform:\n\n* 'default' - Currently supports Red Hat/CentOS 5.x.\n\n* 'node_ssh' - Any platform that is running sshd.\n\n* 'node_jnlp' - Unix platforms.\n\n* 'node_windows' - Windows platforms only.  Depends on .NET Framework, which can be installed with the windows::dotnetfx recipe.\n\n== Java:\n\nHudson requires Java 1.5 or higher, which can be installed via the Opscode java cookbook or windows::java recipe.\n\n== Hudson node authentication:\n\nIf your Hudson instance requires authentication, you'll either need to embed user:pass in the hudson.server.url or issue a hudson-cli.jar login command prior to using the hudson::node_* recipes.  For example, define a role like so:\n\n  name \"hudson_ssh_node\"\n  description \"cli login & register ssh slave with Hudson\"\n  run_list %w(vmw::hudson_login hudson::node_ssh)\n\nWhere the hudson_login recipe is simply:\n\n  hudson_cli \"login --username #{node[:hudson][:username]} --password #{node[:hudson][:password]}\"\n\n= ATTRIBUTES: \n\n* hudson[:mirror] - Base URL for downloading Hudson (server)\n* hudson[:java_home] - Java install path, used for for cli commands\n* hudson[:server][:home] - HUDSON_HOME directory\n* hudson[:server][:user] - User the Hudson server runs as\n* hudson[:server][:port] - TCP listen port for the Hudson server\n* hudson[:server][:url] - Base URL of the Hudson server\n* hudson[:server][:plugins] - Download the latest version of plugins in this list, bypassing update center\n* hudson[:node][:name] - Name of the node within Hudson\n* hudson[:node][:description] - Hudson node description\n* hudson[:node][:executors] - Number of node executors\n* hudson[:node][:home] - Home directory (\"Remote FS root\") of the node\n* hudson[:node][:labels] - Node labels\n* hudson[:node][:mode] - Node usage mode, \"normal\" or \"exclusive\" (tied jobs only)\n* hudson[:node][:launcher] - Node launch method, \"jnlp\", \"ssh\" or \"command\"\n* hudson[:node][:availability] - \"always\" keeps node on-line, \"demand\" off-lines when idle\n* hudson[:node][:in_demand_delay] - number of minutes for which jobs must be waiting in the queue before attempting to launch this slave.\n* hudson[:node][:idle_delay] - number of minutes that this slave must remain idle before taking it off-line. \n* hudson[:node][:env] - \"Node Properties\" -> \"Environment Variables\"\n* hudson[:node][:user] - user the slave runs as\n* hudson[:node][:ssh_host] - Hostname or IP Hudson should connect to when launching an SSH slave\n* hudson[:node][:ssh_port] - SSH slave port\n* hudson[:node][:ssh_user] - SSH slave user name (only required if hudson server and slave user is different)\n* hudson[:node][:ssh_pass] - SSH slave password (not required when server is installed via default recipe)\n* hudson[:node][:ssh_private_key] - hudson master defaults to: `~/.ssh/id_rsa` (created by the default recipe)\n* hudson[:node][:jvm_options] - SSH slave JVM options\n\n= USAGE:\n\n== 'default' recipe\n\nInstalls a Hudson CI server using the http://hudson-ci.org/redhat RPM.  The recipe also generates an ssh private key and stores the ssh public key in the node 'hudson[:pubkey]' attribute for use by the node recipes.\n\n== 'node_ssh' recipe\n\nCreates the user and group for the Hudson slave to run as and sets `.ssh/authorized_keys` to the 'hudson[:pubkey]' attribute.  The 'hudson-cli.jar'[1] is downloaded from the Hudson server and used to manage the nodes via the 'groovy'[2] cli command.  Hudson is configured to launch a slave agent on the node using its SSH slave plugin[3].\n\n[1] http://wiki.hudson-ci.org/display/HUDSON/Hudson+CLI\n[2] http://wiki.hudson-ci.org/display/HUDSON/Hudson+Script+Console\n[3] http://wiki.hudson-ci.org/display/HUDSON/SSH+Slaves+plugin\n\n== 'node_jnlp' recipe\n\nCreates the user and group for the Hudson slave to run as and '/jnlpJars/slave.jar' is downloaded from the Hudson server.\nTODO: runit_service or similar to launch the slave.\n\n== 'node_windows' recipe\n\nCreates the home directory for the node slave and sets 'HUDSON_HOME' and 'HUDSON_URL' system environment variables.  The 'winsw'[1] Windows service wrapper will be downloaded and installed, along with generating `hudson-slave.xml` from a template.  Hudson is configured with the node as a 'jnlp'[2] slave and '/jnlpJars/slave.jar' is downloaded from the Hudson server.  The 'hudsonslave' service will be started the first time the recipe is run or if the service is not running.  The 'hudsonslave' service will be restarted if '/jnlpJars/slave.jar' has changed.  The end results is functionally the same had you chosen the option to \"Let Hudson control this slave as a Windows service\"[3].\n\n[1] http://weblogs.java.net/blog/2008/09/29/winsw-windows-service-wrapper-less-restrictive-license\n[2] http://wiki.hudson-ci.org/display/HUDSON/Distributed+builds\n[3] http://wiki.hudson-ci.org/display/HUDSON/Installing+Hudson+as+a+Windows+service\n\n== 'hudson_cli' resource provider\n\nThis resource can be used to execute the Hudson cli from your recipes.  For example, install plugins via update center and restart Hudson:\n\n    %w(git URLSCM build-publisher).each do |plugin|\n      hudson_cli \"install-plugin #{plugin}\"\n      hudson_cli \"safe-restart\"\n    end\n\n== 'hudson_node' resource provider\n\nThis resource can be used to configure nodes as the 'node_ssh' and 'node_windows' recipes do or \"Launch slave via execution of command on the Master\".\n\n    hudson_node node[:fqdn] do\n      description  \"My node for things, stuff and whatnot\"\n      executors    5\n      remote_fs    \"/var/hudson\"\n      launcher     \"command\"\n      command      \"ssh -i my_key #{node[:fqdn]} java -jar #{remote_fs}/slave.jar\"\n      env          \"ANT_HOME\" => \"/usr/local/ant\", \"M2_REPO\" => \"/dev/null\"\n    end\n\n== 'hudson_job' resource provider\n\nThis resource manages hudson jobs, supporting the following actions:\n\n   :create, :update, :delete, :build, :disable, :enable\n\nThe 'create' and 'update' actions require a hudson job config.xml.  Example:\n\n    git_branch = 'master'\n    job_name = \"sigar-#{branch}-#{node[:os]}-#{node[:kernel][:machine]}\"\n\n    job_config = File.join(node[:hudson][:node][:home], \"#{job_name}-config.xml\")\n\n    hudson_job job_name do\n      action :nothing\n      config job_config\n    end\n\n    template job_config do\n      source \"sigar-hudson-config.xml\"\n      variables :job_name => job_name, :branch => git_branch, :node => node[:fqdn]\n      notifies :update, resources(:hudson_job => job_name), :immediately\n      notifies :build, resources(:hudson_job => job_name), :immediately\n    end\n\n== 'manage_node' library\n\nThe script to generate groovy that manages a node can be used standalone.  For example:\n\n    % ruby manage_node.rb name slave-hostname remote_fs /home/hudson ... | java -jar hudson-cli.jar -s http://hudson:8080/ groovy =\n\n= ISSUES\n\n* CLI authentication - http://issues.hudson-ci.org/browse/HUDSON-3796\n\n* CLI *-node commands fail with \"No argument is allowed: nameofslave\" - http://issues.hudson-ci.org/browse/HUDSON-5973\n\n= LICENSE & AUTHOR:\n\nAuthor:: Doug MacEachern (<dougm@vmware.com>)\nCopyright:: 2010, VMware, Inc\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n",
  "version": "0.3.0",
  "maintainer_email": "dougm@vmware.com",
  "groupings": {
  },
  "recommendations": {
  },
  "name": "hudson",
  "attributes": {
  },
  "suggestions": {
  }
}